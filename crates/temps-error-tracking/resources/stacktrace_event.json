{"event_id":"ec2f7055feec48e095f3cce17092f882","level":"info","exception":{"values":[{"value":"Sentry test message - Hello from API!","stacktrace":{"frames":[{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js","module":"next.dist.compiled.next-server:app-route-turbo.runtime.dev","function":"AppRouteRouteModule.handle","lineno":5,"colno":46008,"in_app":false},{"filename":"node:internal/async_local_storage/async_context_frame","module":"async_context_frame","function":"AsyncLocalStorage.run","lineno":63,"colno":14,"in_app":false},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js","module":"next.dist.compiled.next-server:app-route-turbo.runtime.dev","function":"?","lineno":5,"colno":46054,"in_app":false},{"filename":"node:internal/async_local_storage/async_context_frame","module":"async_context_frame","function":"AsyncLocalStorage.run","lineno":63,"colno":14,"in_app":false},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js","module":"next.dist.compiled.next-server:app-route-turbo.runtime.dev","function":"?","lineno":5,"colno":46097,"in_app":false},{"filename":"node:internal/async_local_storage/async_context_frame","module":"async_context_frame","function":"AsyncLocalStorage.run","lineno":63,"colno":14,"in_app":false},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js","module":"next.dist.compiled.next-server:app-route-turbo.runtime.dev","function":"?","lineno":5,"colno":48760,"in_app":false},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/server/lib/trace/tracer.js","module":"next.dist.server.lib.trace:tracer","function":"NextTracerImpl.trace","lineno":152,"colno":28,"in_app":false,"pre_context":["        }","        const spanId = getSpanId();","        options.attributes = {","            'next.span_name': spanName,","            'next.span_type': type,","            ...options.attributes","        };"],"context_line":"        return context.with(spanContext.setValue(rootSpanIdKey, spanId), ()=>this.getTracerInstance().startActiveSpan(spanName, options, (span)=>{","post_context":["                const startTime = 'performance' in globalThis && 'measure' in performance ? globalThis.performance.now() : undefined;","                const onCleanup = ()=>{","                    rootSpanAttributesStore.delete(spanId);","                    if (startTime && process.env.NEXT_OTEL_PERFORMANCE_PREFIX && _constants.LogSpanAllowList.includes(type || '')) {","                        performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(type.split('.').pop() || '').replace(/[A-Z] {snip}","                            start: startTime,","                            end: performance.now()"]},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/@opentelemetry/api/build/src/api/context.js","module":"@opentelemetry.api.build.src.api:context","function":"ContextAPI.with","lineno":60,"colno":46,"in_app":false,"pre_context":["     *","     * @param context context to be active during function execution","     * @param fn function to execute in a context","     * @param thisArg optional receiver to be used for calling fn","     * @param args optional arguments forwarded to fn","     */","    with(context, fn, thisArg, ...args) {"],"context_line":"        return this._getContextManager().with(context, fn, thisArg, ...args);","post_context":["    }","    /**","     * Bind a context to a target function or event emitter","     *","     * @param context context to bind to the event emitter or function. Defaults to the currently active context","     * @param target function or event emitter to bind","     */"]},{"filename":"app:///_next/server/chunks/node_modules_1568fd42._.js","module":"node_modules_1568fd42._","function":"SentryContextManager.with","lineno":7142,"colno":30,"in_app":true,"pre_context":["                scope: newCurrentScope,","                isolationScope: newIsolationScope","            };","            const ctx1 = setScopesOnContext(context, scopes);","            // Remove the unneeded values again","            const ctx2 = ctx1.deleteValue(SENTRY_FORK_ISOLATION_SCOPE_CONTEXT_KEY).deleteValue(SENTRY_FORK_SET_SCOPE_CONTEXT_KEY).deleteValue {snip}","            setContextOnScope(newCurrentScope, ctx2);"],"context_line":"            return super.with(ctx2, fn, thisArg, ...args);","post_context":["        }","    }","    return SentryContextManager;","}","/**"," * This function runs through a list of OTEL Spans, and wraps them in an `SpanNode`"," * where each node holds a reference to their parent node."]},{"filename":"app:///_next/server/chunks/node_modules_1568fd42._.js","module":"node_modules_1568fd42._","function":"SentryContextManager.with","lineno":9310,"colno":40,"in_app":true,"pre_context":["    }","    active() {","        var _a;","        return (_a = this._asyncLocalStorage.getStore()) !== null && _a !== void 0 ? _a : api_1.ROOT_CONTEXT;","    }","    with(context, fn, thisArg, ...args) {","        const cb = thisArg == null ? fn : fn.bind(thisArg);"],"context_line":"        return this._asyncLocalStorage.run(context, cb, ...args);","post_context":["    }","    enable() {","        return this;","    }","    disable() {","        this._asyncLocalStorage.disable();","        return this;"]},{"filename":"node:internal/async_local_storage/async_context_frame","module":"async_context_frame","function":"AsyncLocalStorage.run","lineno":63,"colno":14,"in_app":false},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/server/lib/trace/tracer.js","module":"next.dist.server.lib.trace:tracer","function":"?","lineno":152,"colno":103,"in_app":false,"pre_context":["        }","        const spanId = getSpanId();","        options.attributes = {","            'next.span_name': spanName,","            'next.span_type': type,","            ...options.attributes","        };"],"context_line":"        return context.with(spanContext.setValue(rootSpanIdKey, spanId), ()=>this.getTracerInstance().startActiveSpan(spanName, options, (span)=>{","post_context":["                const startTime = 'performance' in globalThis && 'measure' in performance ? globalThis.performance.now() : undefined;","                const onCleanup = ()=>{","                    rootSpanAttributesStore.delete(spanId);","                    if (startTime && process.env.NEXT_OTEL_PERFORMANCE_PREFIX && _constants.LogSpanAllowList.includes(type || '')) {","                        performance.measure(`${process.env.NEXT_OTEL_PERFORMANCE_PREFIX}:next-${(type.split('.').pop() || '').replace(/[A-Z] {snip}","                            start: startTime,","                            end: performance.now()"]},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/server/lib/router-utils/instrumentation-node-extensions.js","module":"next.dist.server.lib.router-utils:instrumentation-node-extensions","function":"tracer.startActiveSpan","lineno":82,"colno":71,"in_app":false,"pre_context":["            if (fnIdx) {","                const originalFn = startActiveSpanArgs[fnIdx];","                if ((0, _clientandserverreferences.isUseCacheFunction)(originalFn)) {","                    console.error('A Cache Function (`use cache`) was passed to startActiveSpan which means it will receive a Span argument  {snip}","                }","                startActiveSpanArgs[fnIdx] = withWorkUnitContext(workUnitStore, originalFn);","            }"],"context_line":"            return _workunitasyncstorageexternal.workUnitAsyncStorage.exit(()=>{","post_context":["                // @ts-ignore TS doesn't recognize the overloads correctly","                return originalStartActiveSpan.apply(tracer, startActiveSpanArgs);","            });","        };","        WeakTracers.add(tracer);","        return tracer;","    };"]},{"filename":"node:internal/async_local_storage/async_context_frame","module":"async_context_frame","function":"AsyncLocalStorage.exit","lineno":70,"colno":17,"in_app":false},{"filename":"node:internal/async_local_storage/async_context_frame","module":"async_context_frame","function":"AsyncLocalStorage.run","lineno":63,"colno":14,"in_app":false},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/server/lib/router-utils/instrumentation-node-extensions.js","module":"next.dist.server.lib.router-utils:instrumentation-node-extensions","function":"?","lineno":84,"colno":48,"in_app":false,"pre_context":["                if ((0, _clientandserverreferences.isUseCacheFunction)(originalFn)) {","                    console.error('A Cache Function (`use cache`) was passed to startActiveSpan which means it will receive a Span argument  {snip}","                }","                startActiveSpanArgs[fnIdx] = withWorkUnitContext(workUnitStore, originalFn);","            }","            return _workunitasyncstorageexternal.workUnitAsyncStorage.exit(()=>{","                // @ts-ignore TS doesn't recognize the overloads correctly"],"context_line":"                return originalStartActiveSpan.apply(tracer, startActiveSpanArgs);","post_context":["            });","        };","        WeakTracers.add(tracer);","        return tracer;","    };","}","const WeakTracers = new WeakSet();"]},{"filename":"app:///_next/server/chunks/node_modules_8ab3c4fc._.js","module":"node_modules_8ab3c4fc._","function":"Tracer.startActiveSpan","lineno":3260,"colno":205,"in_app":true,"pre_context":["            opts = arg2;","            ctx = arg3;","            fn = arg4;","        }","        const parentContext = ctx ?? __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$opentelemetry$2f$api$2f$build$2f$esm$ {snip}","        const span = this.startSpan(name, opts, parentContext);","        const contextWithSpanSet = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$opentelemetry$2f$api$2f$build$2f$esm$2f {snip}"],"context_line":"        return __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$opentelemetry$2f$api$2f$build$2f$esm$2f$context$2d$api$2e$j {snip}","post_context":["    }","    /** Returns the active {@link GeneralLimits}. */ getGeneralLimits() {","        return this._generalLimits;","    }","    /** Returns the active {@link SpanLimits}. */ getSpanLimits() {","        return this._spanLimits;","    }"]},{"filename":"app:///_next/server/chunks/node_modules_@opentelemetry_api_build_esm_e96249e4._.js","module":"node_modules_@opentelemetry_api_build_esm_e96249e4._","function":"ContextAPI.with","lineno":785,"colno":54,"in_app":true,"pre_context":["     * @param args optional arguments forwarded to fn","     */ ContextAPI.prototype.with = function(context, fn, thisArg) {","        var _a;","        var args = [];","        for(var _i = 3; _i < arguments.length; _i++){","            args[_i - 3] = arguments[_i];","        }"],"context_line":"        return (_a = this._getContextManager()).with.apply(_a, __spreadArray([","post_context":["            context,","            fn,","            thisArg","        ], __read(args), false));","    };","    /**","     * Bind a context to a target function or event emitter"]},{"filename":"app:///_next/server/chunks/node_modules_1568fd42._.js","module":"node_modules_1568fd42._","function":"SentryContextManager.with","lineno":7142,"colno":30,"in_app":true,"pre_context":["                scope: newCurrentScope,","                isolationScope: newIsolationScope","            };","            const ctx1 = setScopesOnContext(context, scopes);","            // Remove the unneeded values again","            const ctx2 = ctx1.deleteValue(SENTRY_FORK_ISOLATION_SCOPE_CONTEXT_KEY).deleteValue(SENTRY_FORK_SET_SCOPE_CONTEXT_KEY).deleteValue {snip}","            setContextOnScope(newCurrentScope, ctx2);"],"context_line":"            return super.with(ctx2, fn, thisArg, ...args);","post_context":["        }","    }","    return SentryContextManager;","}","/**"," * This function runs through a list of OTEL Spans, and wraps them in an `SpanNode`"," * where each node holds a reference to their parent node."]},{"filename":"app:///_next/server/chunks/node_modules_1568fd42._.js","module":"node_modules_1568fd42._","function":"SentryContextManager.with","lineno":9310,"colno":40,"in_app":true,"pre_context":["    }","    active() {","        var _a;","        return (_a = this._asyncLocalStorage.getStore()) !== null && _a !== void 0 ? _a : api_1.ROOT_CONTEXT;","    }","    with(context, fn, thisArg, ...args) {","        const cb = thisArg == null ? fn : fn.bind(thisArg);"],"context_line":"        return this._asyncLocalStorage.run(context, cb, ...args);","post_context":["    }","    enable() {","        return this;","    }","    disable() {","        this._asyncLocalStorage.disable();","        return this;"]},{"filename":"node:internal/async_local_storage/async_context_frame","module":"async_context_frame","function":"AsyncLocalStorage.run","lineno":63,"colno":14,"in_app":false},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/server/lib/router-utils/instrumentation-node-extensions.js","module":"next.dist.server.lib.router-utils:instrumentation-node-extensions","function":"?","lineno":93,"colno":74,"in_app":false,"pre_context":["        };","        WeakTracers.add(tracer);","        return tracer;","    };","}","const WeakTracers = new WeakSet();","function withWorkUnitContext(workUnitStore, fn) {"],"context_line":"    return (...args)=>_workunitasyncstorageexternal.workUnitAsyncStorage.run(workUnitStore, fn, ...args);","post_context":["}","","//# sourceMappingURL=instrumentation-node-extensions.js.map"]},{"filename":"node:internal/async_local_storage/async_context_frame","module":"async_context_frame","function":"AsyncLocalStorage.run","lineno":63,"colno":14,"in_app":false},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/server/lib/trace/tracer.js","module":"next.dist.server.lib.trace:tracer","function":"?","lineno":170,"colno":36,"in_app":false,"pre_context":["                if (isRootSpan) {","                    rootSpanAttributesStore.set(spanId, new Map(Object.entries(options.attributes ?? {})));","                }","                try {","                    if (fn.length > 1) {","                        return fn(span, (err)=>closeSpanWithError(span, err));","                    }"],"context_line":"                    const result = fn(span);","post_context":["                    if ((0, _isthenable.isThenable)(result)) {","                        // If there's error make sure it throws","                        return result.then((res)=>{","                            span.end();","                            // Need to pass down the promise result,","                            // it could be react stream response with error { error, stream }","                            return res;"]},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js","module":"next.dist.compiled.next-server:app-route-turbo.runtime.dev","function":"?","lineno":5,"colno":48915,"in_app":false},{"filename":"/Users/davidviejo/poc/test-repo-deploy-template1/node_modules/next/dist/compiled/next-server/app-route-turbo.runtime.dev.js","module":"next.dist.compiled.next-server:app-route-turbo.runtime.dev","function":"AppRouteRouteModule.do","lineno":5,"colno":38775,"in_app":false},{"filename":"node:internal/async_local_storage/async_context_frame","module":"async_context_frame","function":"AsyncLocalStorage.run","lineno":59,"colno":14,"in_app":false},{"filename":"app:///_next/server/chunks/[root-of-the-server]__0d32eaf8._.js","module":"[root-of-the-server]__0d32eaf8._","function":"GET","lineno":256,"colno":214,"in_app":true,"pre_context":["    try {","        // Check if DSN is configured","        if (\"TURBOPACK compile-time falsy\", 0) //TURBOPACK unreachable","        ;","        const eventIds = [];","        // Test 1: Capture a simple message","        if (testType === \"message\" || testType === \"all\") {"],"context_line":"            const eventId = __TURBOPACK__imported__module__$5b$project$5d2f$node_modules$2f40$sentry$2f$nextjs$2f$build$2f$cjs$2f$index$2e$s {snip}","post_context":["            eventIds.push(eventId);","            console.log(\"âœ… Message captured, event ID:\", eventId);","        }","        // Test 2: Capture an exception with stack trace","        if (testType === \"exception\" || testType === \"all\") {","            try {","                // Create nested functions to generate a meaningful stack trace"]}]},"mechanism":{"type":"generic","handled":true,"synthetic":true}}]},"message":"Sentry test message - Hello from API!","platform":"node","contexts":{"trace":{"parent_span_id":"1d68004ed87fef56","span_id":"64746bd058cd4a65","trace_id":"39985dffcd876258fa4af21c9a68655b"},"runtime":{"name":"node","version":"v24.9.0"},"app":{"app_start_time":"2025-10-13T20:22:48.062Z","app_memory":1331085312,"free_memory":360200667136},"os":{"kernel_version":"24.6.0","name":"macOS","version":"15.6","build":"24G84"},"device":{"boot_time":"2025-10-06T10:36:39.828Z","arch":"arm64","memory_size":549755813888,"free_memory":360200667136,"processor_count":32,"cpu_description":"Apple M3 Ultra","processor_frequency":2400},"culture":{"locale":"en-US","timezone":"Europe/Madrid"},"cloud_resource":{}},"server_name":"Davids-Mac-Studio-2.local","timestamp":1760387552.983,"environment":"development","release":"6e44b72969d1353b0c8caf4cc65af0c351ff28b6","sdk":{"integrations":["InboundFilters","FunctionToString","LinkedErrors","RequestData","NodeSystemError","Console","OnUncaughtException","OnUnhandledRejection","ContextLines","LocalVariablesAsync","Context","ChildProcess","ProcessSession","Modules","NodeFetch","Express","Fastify","Graphql","Hono","Mongo","Mongoose","Mysql","Mysql2","Redis","Postgres","Prisma","Hapi","Koa","Connect","Tedious","GenericPool","Kafka","Amqplib","LruMemoizer","VercelAI","OpenAI","PostgresJs","Firebase","Anthropic_AI","Google_GenAI","Http","DistDirRewriteFrames"],"name":"sentry.javascript.nextjs","version":"10.19.0","packages":[{"name":"npm:@sentry/nextjs","version":"10.19.0"},{"name":"npm:@sentry/node","version":"10.19.0"}]},"tags":{"turbopack":true},"transaction":"GET /api/sentry-test","breadcrumbs":[{"timestamp":1760386969.802,"category":"console","data":{"arguments":["âœ… Sentry.init() completed successfully"],"logger":"console"},"level":"log","message":"âœ… Sentry.init() completed successfully"},{"timestamp":1760386969.802,"category":"console","data":{"arguments":["âœ… Sentry Server initialized"],"logger":"console"},"level":"log","message":"âœ… Sentry Server initialized"},{"timestamp":1760386969.802,"category":"console","data":{"arguments":["ğŸ§ª Testing Sentry capture..."],"logger":"console"},"level":"log","message":"ğŸ§ª Testing Sentry capture..."},{"timestamp":1760386969.806,"category":"console","data":{"arguments":["âœ… Test event captured with ID:","6e2b6e480fcc427aa857171cf4361d9e"],"logger":"console"},"level":"log","message":"âœ… Test event captured with ID: 6e2b6e480fcc427aa857171cf4361d9e"},{"timestamp":1760386969.806,"category":"console","data":{"arguments":["â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"],"logger":"console"},"level":"log","message":"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"},{"timestamp":1760386969.806,"category":"console","data":{"arguments":["ğŸ SENTRY SERVER CONFIG FILE EXECUTED"],"logger":"console"},"level":"log","message":"ğŸ SENTRY SERVER CONFIG FILE EXECUTED"},{"timestamp":1760386969.806,"category":"console","data":{"arguments":["â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"],"logger":"console"},"level":"log","message":"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"},{"timestamp":1760386969.806,"category":"console","data":{"arguments":["âœ… Sentry server config loaded"],"logger":"console"},"level":"log","message":"âœ… Sentry server config loaded"},{"timestamp":1760386969.806,"category":"console","data":{"arguments":["â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"],"logger":"console"},"level":"log","message":"â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"},{"timestamp":1760386969.818,"category":"console","data":{"arguments":[" \u001b[32m\u001b[1mâœ“\u001b[22m\u001b[39m Ready in 1622ms"],"logger":"console"},"level":"log","message":" \u001b[32m\u001b[1mâœ“\u001b[22m\u001b[39m Ready in 1622ms"},{"timestamp":1760387552.982,"category":"console","data":{"arguments":["ğŸ” Sentry Test Endpoint Called:",{"testType":"message","dsnConfigured":true,"environment":"development"}],"logger":"console"},"level":"log","message":"ğŸ” Sentry Test Endpoint Called: [object Object]"}],"request":{"headers":{"host":"localhost:3002","accept-encoding":"gzip, deflate","accept":"*/*","connection":"keep-alive","user-agent":"HTTPie/3.2.4"},"method":"GET","url":"http://localhost:3002/api/sentry-test?type=message","cookies":{},"query_string":"type=message"},"modules":{"@ai-sdk/openai":"^1.1.9","@opentelemetry/api-logs":"^0.57.1","@opentelemetry/auto-instrumentations-node":"^0.55.0","@opentelemetry/exporter-trace-otlp-http":"^0.57.0","@opentelemetry/resources":"^1.30.0","@opentelemetry/sdk-logs":"^0.57.1","@opentelemetry/sdk-node":"^0.57.0","@opentelemetry/sdk-trace-node":"^1.30.0","@sentry/nextjs":"^10.19.0","@temps-sdk/node-sdk":"^0.0.1-alpha.4","@temps-sdk/react-analytics":"^0.0.1-beta.36","@vercel/otel":"^1.10.0","ai":"^4.1.17","class-variance-authority":"^0.7.0","clsx":"^2.1.1","langfuse":"^3.34.1","langfuse-vercel":"^3.34.1","lucide-react":"^0.460.0","next":"15.5.2","react":"19.1.1","react-dom":"19.1.1","tailwind-merge":"^2.5.4","tailwindcss-animate":"^1.0.7","@types/node":"^20","@types/react":"^18","@types/react-dom":"^18","eslint":"^8","eslint-config-next":"15.0.3","postcss":"^8","tailwindcss":"^3.4.1","typescript":"^5"}}
