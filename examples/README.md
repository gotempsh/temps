# Temps Deployment Examples

This directory contains example applications for testing Temps deployment presets.

## Quick Start

**Bootstrap all examples:**
```bash
cd examples
./bootstrap.sh
```

This will create:
- **Vite + React** example (bun)
- **Next.js** example (npm, TypeScript, Tailwind CSS)
- **NestJS** example (npm, TypeScript)

## Directory Structure

```
examples/
├── vite/
│   └── react-basic/      Vite + React (generated)
├── nextjs/
│   └── basic/            Next.js + TypeScript + Tailwind (generated)
├── nestjs/
│   └── basic/            NestJS + TypeScript (generated)
├── go/
│   └── gin-basic/        Go + Gin framework
├── python/
│   └── flask-basic/      Python + Flask
├── rust/
│   └── actix-basic/      Rust + Actix Web
├── java/
│   └── spring-basic/     Java + Spring Boot
├── csharp/
│   └── dotnet-basic/     C# + .NET 8 Minimal API
├── bootstrap.sh          Script to generate examples
└── README.md             This file
```

**Note:** JavaScript framework examples are generated by `bootstrap.sh` and are not checked into git. Backend language examples (Go, Python, Rust, Java, C#) are checked into git.

## Purpose

These example repositories are used to:
1. **Test preset auto-detection** - Verify framework detection works correctly
2. **Validate package managers** - Test npm, yarn, pnpm, and bun support
3. **Benchmark builds** - Track build times and image sizes
4. **Regression testing** - Ensure deployments work across releases
5. **Documentation** - Provide real-world examples for users

## Current Test Coverage

### JavaScript/TypeScript Frameworks

#### Next.js
- ✅ npm (vercel/app-playground)
- ✅ Yarn Berry (timlrx/tailwind-nextjs-starter-blog)
- ✅ pnpm (vercel/commerce)
- ⚠️  Bun (need example)

#### Vite
- ✅ npm (SafdarJamal/vite-template-react)
- ⚠️  Yarn (need example)
- ⚠️  pnpm (need example)
- ⚠️  Bun (need example)

#### NestJS
- ⚠️  All package managers need examples

### Backend Languages

#### Go
- ✅ Gin framework (examples/go/gin-basic)

#### Python
- ✅ Flask (examples/python/flask-basic)

#### Rust
- ✅ Actix Web (examples/rust/actix-basic)

#### Java
- ✅ Spring Boot 3.2 with Maven (examples/java/spring-basic)

#### C#
- ✅ .NET 8 (LTS) Minimal API (examples/csharp/dotnet-basic)

## Running Tests

### Test All Repositories
```bash
cargo test --test public_repo_deployment_test test_deploy_public_repositories -- --nocapture
```

### Test Specific Preset
```bash
# Next.js only
cargo test --test public_repo_deployment_test -p temps-deployments -- --nocapture | grep -A50 "Next.js"

# Vite only
cargo test --test public_repo_deployment_test -p temps-deployments -- --nocapture | grep -A50 "Vite"
```

## Adding New Examples

1. **Find a suitable repository:**
   - Publicly accessible on GitHub
   - Uses standard package manager (npm/yarn/pnpm/bun)
   - Builds without custom configuration
   - Actively maintained

2. **Document in REPOS.md:**
   - Add repository details to `<preset>/REPOS.md`
   - Include package manager, features, expected preset
   - Note any special requirements

3. **Add to test array:**
   - Update `public_repo_deployment_test.rs`
   - Add new `PublicRepoTestCase` entry
   - Run tests to verify

4. **Document results:**
   - Build time
   - Image size
   - Any issues encountered

## Test Metrics

### Build Performance
- **Fast**: <10s (Vite, simple SPAs)
- **Medium**: 10-60s (Next.js with moderate complexity)
- **Slow**: >60s (Large Next.js apps, monorepos)

### Image Size
- **Small**: <100 MB (Vite with nginx)
- **Medium**: 100-500 MB (Next.js standalone)
- **Large**: >500 MB (Full Next.js with dependencies)

## Contributing

When adding new example repositories:
- Prefer official/well-maintained repos
- Cover different package managers
- Include variety of features (SSR, SSG, API routes, etc.)
- Document any quirks or special handling needed
